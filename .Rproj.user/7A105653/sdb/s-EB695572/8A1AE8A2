{
    "collab_server" : "",
    "contents" : "---\ntitle: \"國內各港口/機場使用率評估\"\noutput: github_document\n---\n\n\n## 作業說明 （繳交時請直接刪除這個章節）\n\n作業目的：期末專題暖身\n\n依下列指示，完成期末分析專題作業規劃：\n\n- 訂出分析問題，並將R Markdown的一級標題(第一行的title:)中的\"長庚大學 大數據分析方法 作業六\"取代為期末專題的分析問題，並在分析議題背景前加上組員姓名 (`10pt`)\n- 分析議題背景 (`10pt`) 與動機 (`10pt`)\n- 資料說明 (`10pt`) 與 載入 (`10pt`)\n- 資料處理與清洗 (`10pt`) 說明 (`10pt`)\n- 對資料們進行探索式資料分析，圖文並茂佳!(`20pt`)\n- 期末專題分析規劃與假設 (`10pt`)\n\n## 分析議題背景\nB0344218 葉建夆\nB0344117 沈庭安\n台灣本島、離島的港口/機場共有32個，每一座都是耗資鉅款來建造的。有的是為了進出口買賣、有的是為了人口出入境；但真的有必要蓋到這麼多個嗎?甚至有的縣市還有兩座，這些機場/港口的存在是否有必要呢?\n\n隨著機場捷運的通車，替不少出入機場的公民帶來便利，然而機場捷運的通車後，是否有影響到桃園機場的人數流量呢?\n\n當我們今天從桃園機場出境，我們一樣會從桃園機場入境嗎?機場的出境入境是否呈現正相關?\n\n我們藉由分析三個月份的機場港口/出入境人數，來分析以上的議題。\n\n## 分析動機\n了解各機場及港口出入境的使用率，並觀察:\n1.那些機場/港口的人數流量最高/低\n2.機場捷運通車後是否有影響桃園機場的人數流量\n3.機場/港口出入境人數是否有相關性\n\n## 使用資料\n內政部2017年2月(X1060228)、3月(X1060331)和4月(X1060430)各港口及機場的出入境人數量\n\n載入使用資料們\n```{r}\nlibrary(readr)\nX10602 <- read_csv(\"C:/Users/pig98/Desktop/1060228.csv\",skip=1)\nView(X10602)\n\nX10603 <- read_csv(\"C:/Users/pig98/Desktop/1060331.csv\",skip=1)\nView(X10603)\n\nX10604 <- read_csv(\"C:/Users/pig98/Desktop/1060430.csv\",skip=1)\nView(X10604)\n```\n\n## 資料處理與清洗\nstep1:先將多餘的欄、列刪除，以便合併資料框\nstep2:將三、四個月的資料框合併成同一個(二月資料獨立觀察，因此不合併)\nstep3:將系統自動填入的欄位名稱重新命名為相對應的機場港口名稱\nstep4:由於桃園機場並不符合迴圈規則，因此獨立操作\nstep5:刪掉多餘的第一列，並將所有資料轉為numeric型態(原本為charactor)\n\n處理資料\n```{r}\nX10602<-X10602[-c(30,31,32),-100]\nX10603<-X10603[-c(2,34,35,36),-100]\nX10604<-X10604[-c(32,33,34),-100] #step1\n\nX10603_04<-rbind(X10603,X10604[-c(1,2),])\nView(X10603_04) #step2\n\nfor(i in c(10:97)){\n  if((i %% 3) ==1){\n      names(X10602)[c(i+2)]<-paste0(names(X10602)[i],X10602[1,i+2])\n      names(X10602)[c(i+1)]<-paste0(names(X10602)[i],X10602[1,i+1])\n      names(X10602)[c(i)]<-paste0(names(X10602)[i],X10602[1,i])\n    \n      names(X10603_04)[c(i+2)]<-paste0(names(X10603_04)[i],X10603_04[1,i+2])\n      names(X10603_04)[c(i+1)]<-paste0(names(X10603_04)[i],X10603_04[1,i+1])\n      names(X10603_04)[c(i)]<-paste0(names(X10603_04)[i],X10603_04[1,i])\n  }\n} #step3\n\nfor(i in c(1:6))\n{\n  if(i%%3==0)\n  {    \n    names(X10602)[c(i+2)]<-paste0(names(X10602)[i],X10602[1,i+2])\n    names(X10602)[c(i+1)]<-paste0(names(X10602)[i],X10602[1,i+1])\n    names(X10602)[c(i)]<-paste0(names(X10602)[i],X10602[1,i])\n    \n    names(X10603_04)[c(i+2)]<-paste0(names(X10603_04)[i],X10603_04[1,i+2])\n    names(X10603_04)[c(i+1)]<-paste0(names(X10603_04)[i],X10603_04[1,i+1])\n    names(X10603_04)[c(i)]<-paste0(names(X10603_04)[i],X10603_04[1,i])\n  }\n} #step4\n\nX10602<-data.frame(lapply(X10602[-1,], function(x) as.numeric(as.character(x))))\nX10603_04<-data.frame(lapply(X10603_04[-1,], function(x) as.numeric(as.character(x)))) #step5\n```\n\n## 探索式資料分析\n我們想知道，哪個機場/港口的出/入境率為最高；而出/入境率之間，是否有關係?\n\n結論1:我們從cross_match這張表中可以發現，有34%(11/32)的港口/機場，是使用人數接近於0的，而原因有待探討；而桃園機場1.2期的使用率為前兩名，且遠遠比第三名的高雄機場多出了1,000,000以上，相當可觀。\n\n結論2:我們想知道是否因為機場捷運，使得原本會去松山機場的人口被拉到了桃園機場，因此我們載入了機場捷運通車之前的資料作觀察(10602月)，簡單的算一下松山機場跟桃園機場的出入境人數總和，發現其實比例和三四的非常接近，我們可以推測，機場捷運跟桃園機場的人數流量並沒有太大的關係。\n\n結論3:我們從qplot圖可知道，港口/機場的出入境是呈正相關關係的，入境人數多的機場/港口，出境也相對多。\n```{r}\nlibrary(magrittr)\nlibrary(reshape2)\nlibrary(dplyr)\nlibrary(ggplot2)\n\npeople_in<-(X10603_04[,grep(\"入境查驗\",names(X10603_04))])%>%colSums()%>%data.frame()\npeople_in<-cbind(people_in,\"港口/機場\"=rownames(people_in))\nnames(people_in)[names(people_in)==\".\"]=\"入境總計\"\npeople_in<-(people_in[order(people_in$入境總計,decreasing=T),])\nrownames(people_in) <- NULL\n#取得入境人數統計\n\npeople_out<-(X10603_04[,grep(\"出境查驗\",names(X10603_04))])%>%colSums()%>%data.frame()\npeople_out<-cbind(people_out,\"港口/機場\"=rownames(people_out))\nnames(people_out)[names(people_out)==\".\"]=\"出境總計\"\npeople_out<-(people_out[order(people_out$出境總計,decreasing=T),])\nrownames(people_out) <- NULL\n#取得出境人數統計\n\ncross_match<-cbind(people_in,people_out)\nrownames(cross_match) <- NULL\n#將出入境人數結合\n\nView(cross_match)\n#用表格來觀察港口/機場的出入境狀況\n\nsum(X10602$桃園一期小計)\nsum(X10602$桃園二期小計)\nsum(X10602$松山機場小計)\n#計算106年2月(機場捷運正式通車前)桃園機場與松山機場的出入境人數總和\n\nqplot(入境總計,出境總計,\n      data=cross_match,\n      geom = c(\"point\", \"smooth\"))\n#畫出出入境qplot圖\n```\n\n## 期末專題分析規劃\n\n",
    "created" : 1495777274182.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "832098732",
    "id" : "8A1AE8A2",
    "lastKnownWriteTime" : 1496128192,
    "last_content_update" : 1496128192372,
    "path" : "C:/Users/pig98/Desktop/CGUIM_BigData_HW6-b0688335/README.Rmd",
    "project_path" : "README.Rmd",
    "properties" : {
    },
    "relative_order" : 1,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_markdown"
}